(this["webpackJsonpcrm-v3"]=this["webpackJsonpcrm-v3"]||[]).push([[124],{1262:function(e,t,n){"use strict";t.a=n.p+"static/media/deleteObject.73bd03c7.png"},1263:function(e,t,n){"use strict";var a,c,i,o,l,r,s,d=n(21),b=n(102),j=n.n(b),h=n(320),p=n.n(h),g=n(1262),m=(n(0),n(39)),f=n(3),O=n(285),u=n(16),x=n(480),_=n(1229),w=n(2);const v=e=>{let{dataDelete:t,title:n,decs:a,methodDelete:c,setShowModalDelete:i,isLoading:o,mask:l,loadData:r,setPositionLogo:s,openConfirm:d,setOpenConfirm:b,type:j,onDelete:h}=e;const p=Object(m.c)(),{t:u}=Object(x.a)(),{showModalConfirmDelete:_}=Object(O.d)((e=>e.globalReducer)),v=()=>{"custom-view"===j&&b(!1),p(Object(f.setShowModalConfirmDelete)(!1)),i&&i(!0)};return Object(w.jsxs)(z,{title:u("common.confirmAction"),visible:"custom-view"===j?d:_,mask:l,onCancel:()=>{v()},width:400,footer:null,children:[Object(w.jsxs)(D,{children:[Object(w.jsx)("img",{alt:"",src:g.a}),Object(w.jsxs)(B,{children:[u("common.confirmDelete")," ",n,"?"]}),Object(w.jsx)(S,{children:a})]}),Object(w.jsxs)(k,{children:[Object(w.jsx)(y,{size:"large",htmlType:"submit",loading:o,onClick:()=>{c&&p(c({...t})),r(),p(Object(f.setShowModalConfirmDelete)(!1)),h&&h(),s&&s(t),"custom-view"===j&&b(!1)},children:u("common.delete")}),Object(w.jsx)(C,{size:"large",onClick:()=>{v()},children:u("common.cancel")})]})]})};t.a=Object(_.a)()(v),v.defaultProps={loadData:()=>{},type:"",openConfirm:!1,setOpenConfirm:()=>{}};const k=u.b.div(a||(a=Object(d.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 34px;\n"]))),y=Object(u.b)(j.a)(c||(c=Object(d.a)(["\n  background-color: ",";\n  color: #fff;\n  margin-right: 16px;\n  border-radius: 4px;\n\n  :hover {\n    background: ",";\n    color: #fff;\n  }\n"])),(e=>e.theme.main),(e=>e.theme.darker)),C=Object(u.b)(j.a)(i||(i=Object(d.a)(["\n  background-color: #fff;\n  border-radius: 4px;\n\n  :hover {\n    background: ",";\n    color: #fff;\n  }\n"])),(e=>e.theme.darker)),D=u.b.div(o||(o=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n\n  img {\n    width: 70px;\n    margin-bottom: 16px;\n  }\n"]))),B=u.b.span(l||(l=Object(d.a)(["\n  font-family: var(--roboto-500);\n  font-size: 18px;\n  line-height: 26px;\n  color: #2c2c2c;\n  text-align: center;\n"]))),S=u.b.span(r||(r=Object(d.a)(["\n  font-size: 14px;\n  line-height: 22px;\n  text-align: center;\n  color: #595959;\n"]))),z=Object(u.b)(p.a)(s||(s=Object(d.a)(["\n  .ant-modal-header {\n    border-radius: 10px 10px 0 0;\n    background: #f2f4f5;\n    padding: 7px 24px;\n  }\n\n  .ant-modal-title {\n    font-family: var(--roboto-700);\n  }\n\n  .ant-modal-close-x {\n    height: 36.6px;\n    line-height: 36.6px;\n\n    .anticon {\n      color: #141414;\n    }\n  }\n\n  .ant-modal-content {\n    border-radius: 10px;\n  }\n"])))},1719:function(e,t,n){"use strict";t.a=n.p+"static/media/editKb.2e576da2.svg"},1720:function(e,t,n){"use strict";t.a=n.p+"static/media/deleteKb.71479612.svg"},2046:function(e,t,n){"use strict";n.r(t);var a,c,i,o,l,r=n(21),s=n(317),d=n(1255),b=n(707),j=n(1244),h=n(1245),p=n(148),g=n(731),m=n.n(g),f=n(26),O=n(0),u=n(152),x=n(285),_=n(16),w=n(1719),v=n(1720),k=n(1263),y=n(3),C=n(203),D=n(14),B=n(480),S=n(63),z=n(237),A=n(157),L=n(2);const{Option:P}=s.a;t.default=()=>{const{t:e}=Object(B.a)(),t=Object(x.c)(),{search:n}=Object(f.m)(),a=Object(f.o)(),c=Object(O.useRef)(),i=new URLSearchParams(n),{showLoadingScreen:o}=Object(x.d)((e=>e.globalReducer)),l=i.get("object_id"),{listArticle:r,treeView:g,searchArticle:_,pagination:K,filterArticle:T,totalPage:F}=Object(x.d)((e=>e.knowledgeBaseViewReducer)),{editKnowledgeBaseSetting:H}=Object(x.d)((e=>e.knowledgeBaseSettingReducer)),{page:J,limit:X}=K,[Y,I]=Object(O.useState)({});Object(O.useEffect)((()=>{t(Object(S.b)(e("knowledgeBase.knowledgeBase")))}),[e]);return Object(O.useEffect)((()=>{t(Object(u.e)()),t(Object(C.c)()),t(Object(u.l)("")),t(Object(u.c)({data:{object_id:l,page:0,limit:16,search_with_title:""},pagination:{object_id:l,current_page:1,record_per_page:16,search_with:{meta:[],data:[]}}}))}),[]),Object(O.useEffect)((()=>()=>{t(Object(u.i)()),t(Object(D.Fc)())}),[]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(d.a,{style:{paddingLeft:"2rem"},children:Object(L.jsxs)(N,{children:[" ",e("knowledgeBase.knowledgeBaseView")," "]})}),Object(L.jsxs)(R,{justify:"space-around",children:[Object(L.jsx)(M,{span:4,children:Object(L.jsx)(b.a,{ref:c,className:"draggable-tree",treeData:g,defaultExpandAll:!1,onSelect:(e,n)=>{n.selected?(t(Object(u.l)("")),n.node.children.length>0?(t(Object(u.c)({data:{object_id:l,page:0,limit:16,search_with_title:"",section_name:n.node.title},pagination:{object_id:l,current_page:0,record_per_page:16,search_with:{meta:[],data:[{id_field:H.section_name,value:n.node.title}]},sort_by:{}}})),t(Object(u.j)({key:"section_name",value:""})),t(Object(u.j)({key:"category_name",value:""}))):t(Object(u.c)({data:{object_id:l,page:0,limit:16,search_with_title:"",section_name:n.node.parent_title,category_name:n.node.title},pagination:{object_id:l,current_page:J,record_per_page:16,search_with:{meta:[],data:[{id_field:H.category_name,value:n.node.title},{id_field:H.section_name,value:n.node.parent_title}]},sort_by:{}}}))):(t(Object(u.c)({data:{object_id:l,page:0,limit:16,search_with_title:""},pagination:{object_id:l,current_page:1,record_per_page:16,search_with:{meta:[],data:[]}}})),t(Object(u.k)({page:0,limit:16})),t(Object(u.j)({key:"section_name",value:""})),t(Object(u.j)({key:"category_name",value:""})))}})}),Object(L.jsxs)(V,{span:19,children:[Object(L.jsxs)(j.a,{justify:"space-between",children:[Object(L.jsx)(h.a,{span:16,children:Object(L.jsx)(j.a,{justify:"center",children:Object(L.jsx)(h.a,{span:18,children:Object(L.jsx)(m.a,{placeholder:e("knowledgeBase.searchPlaceholder"),allowClear:!0,enterButton:e("common.search"),size:"large",value:_,onChange:e=>{t(Object(u.l)(e.target.value))},onSearch:e=>{t(Object(u.l)(e)),e.length>0&&a("/article-detail?object_id="+l)}})})})}),Object(L.jsx)(h.a,{span:8,children:Object(L.jsxs)(j.a,{justify:"end",children:[Object(L.jsx)(p.a,{span:12,style:{marginRight:"0.5rem"},onClick:()=>{a("/articles")},children:e("knowledgeBase.addArticle")}),Object(L.jsxs)(s.a,{span:12,defaultValue:"knowledgebase",onChange:e=>{"list_view"===e&&(a("/objects/"+l+"/default-view"),t(Object(C.g)(!0)))},children:[Object(L.jsx)(P,{value:"list_view",children:e("knowledgeBase.goToListView")}),Object(L.jsx)(P,{value:"knowledgebase",children:e("knowledgeBase.knowledgeBase")})]})]})})]}),Object(L.jsx)(j.a,{style:{height:"90%",overflowX:"hidden",overflowY:"scroll"},onScroll:e=>{if(e.target.scrollTop+e.target.clientHeight>=e.target.scrollHeight&&F-1>J){let e=[];_.length>0&&e.push({id_field:H.title,value:_}),T.section_name&&e.push({id_field:H.section_name,value:T.section_name}),T.category_name&&e.push({id_field:H.category_name,value:T.category_name}),t(Object(u.g)({data:{object_id:l,page:J+1,limit:X,search_with_title:_,...T},pagination:{object_id:l,current_page:J,record_per_page:16,search_with:{meta:[],data:e},sort_by:{}}}))}},children:Object(L.jsx)(h.a,{span:24,children:Object(L.jsx)(j.a,{style:{overflowX:"hidden",overflowY:"scroll"},align:"top",children:r&&r.map((e=>Object(L.jsx)(h.a,{span:6,style:{padding:"1rem 1rem 0rem 0rem"},children:Object(L.jsxs)(E,{onClick:()=>{a("/article-detail?id="+e._id+"&object_id="+l)},children:[Object(L.jsxs)(j.a,{justify:"space-between",children:[Object(L.jsx)(h.a,{span:18,children:Object(L.jsxs)("span",{className:"title-article",children:[" ",e.title," "]})}),Object(L.jsxs)(h.a,{span:5,className:"icon-edit-delete",children:[Object(L.jsx)("img",{src:w.a,alt:"",onClick:t=>{t.stopPropagation(),t.preventDefault(),a("/articles?object_id="+l+"&id="+e._id)}}),Object(L.jsx)("img",{src:v.a,alt:"",onClick:n=>{var a;n.stopPropagation(),n.preventDefault(),a=e._id,t(Object(y.setShowModalConfirmDelete)(!0)),I({ids:[a],object_id:l})}})]})]}),Object(L.jsxs)("span",{className:"body-article",children:[" ",Object(L.jsx)("p",{children:Object(z.a)(e.body,A.C)})]})]})})))})})})]}),Object(L.jsx)(k.a,{title:e("knowledgeBase.deleteArticle"),decs:e("common.descriptionDelete"),methodDelete:u.b,dataDelete:Y,isLoading:o})]})]})};const R=Object(_.b)(j.a)(a||(a=Object(r.a)(["\n  padding: 1rem;\n  width: 100%;\n  height: 95%;\n  overflow: hidden scroll;\n"]))),M=Object(_.b)(h.a)(c||(c=Object(r.a)(["\n  height: 100%;\n  background-color: #ffffff;\n"]))),V=Object(_.b)(h.a)(i||(i=Object(r.a)(["\n  height: 100%;\n  overflow: hidden;\n  padding: 1rem;\n  background-color: #ffffff;\n"]))),E=_.b.div(o||(o=Object(r.a)(["\n  padding: 1rem;\n  height: 20vh;\n  .title-article {\n    font-size: 16px;\n    font-family: var(--roboto-700);\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n  }\n  .body-article {\n    font-family: var(--roboto-400);\n    font-size: 16px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n  }\n  border: 1px solid #ececec;\n  box-sizing: border-box;\n  border-radius: 4px;\n  .icon-edit-delete {\n    display: none;\n  }\n  &:hover {\n    border-bottom: 3px solid ",";\n    .icon-edit-delete {\n      display: block;\n    }\n  }\n"])),(e=>e.theme.main)),N=Object(_.b)(d.a.Item)(l||(l=Object(r.a)(["\n  font-family: var(--roboto-500);\n  font-size: 18px !important;\n  color: #2c2c2c;\n  cursor: default;\n"])))}}]);
//# sourceMappingURL=124.1b8ae66f.chunk.js.map