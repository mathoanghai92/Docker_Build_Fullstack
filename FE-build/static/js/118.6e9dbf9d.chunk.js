(this["webpackJsonpcrm-v3"]=this["webpackJsonpcrm-v3"]||[]).push([[118],{1262:function(e,n,t){"use strict";n.a=t.p+"static/media/deleteObject.73bd03c7.png"},1263:function(e,n,t){"use strict";var c,a,o,r,i,l,s,d=t(21),b=t(102),j=t.n(b),p=t(320),m=t.n(p),u=t(1262),f=(t(0),t(39)),h=t(3),x=t(285),O=t(16),g=t(480),v=t(1229),k=t(2);const y=e=>{let{dataDelete:n,title:t,decs:c,methodDelete:a,setShowModalDelete:o,isLoading:r,mask:i,loadData:l,setPositionLogo:s,openConfirm:d,setOpenConfirm:b,type:j,onDelete:p}=e;const m=Object(f.c)(),{t:O}=Object(g.a)(),{showModalConfirmDelete:v}=Object(x.d)((e=>e.globalReducer)),y=()=>{"custom-view"===j&&b(!1),m(Object(h.setShowModalConfirmDelete)(!1)),o&&o(!0)};return Object(k.jsxs)(I,{title:O("common.confirmAction"),visible:"custom-view"===j?d:v,mask:i,onCancel:()=>{y()},width:400,footer:null,children:[Object(k.jsxs)(C,{children:[Object(k.jsx)("img",{alt:"",src:u.a}),Object(k.jsxs)(D,{children:[O("common.confirmDelete")," ",t,"?"]}),Object(k.jsx)(S,{children:c})]}),Object(k.jsxs)(_,{children:[Object(k.jsx)(R,{size:"large",htmlType:"submit",loading:r,onClick:()=>{a&&m(a({...n})),l(),m(Object(h.setShowModalConfirmDelete)(!1)),p&&p(),s&&s(n),"custom-view"===j&&b(!1)},children:O("common.delete")}),Object(k.jsx)(w,{size:"large",onClick:()=>{y()},children:O("common.cancel")})]})]})};n.a=Object(v.a)()(y),y.defaultProps={loadData:()=>{},type:"",openConfirm:!1,setOpenConfirm:()=>{}};const _=O.b.div(c||(c=Object(d.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 34px;\n"]))),R=Object(O.b)(j.a)(a||(a=Object(d.a)(["\n  background-color: ",";\n  color: #fff;\n  margin-right: 16px;\n  border-radius: 4px;\n\n  :hover {\n    background: ",";\n    color: #fff;\n  }\n"])),(e=>e.theme.main),(e=>e.theme.darker)),w=Object(O.b)(j.a)(o||(o=Object(d.a)(["\n  background-color: #fff;\n  border-radius: 4px;\n\n  :hover {\n    background: ",";\n    color: #fff;\n  }\n"])),(e=>e.theme.darker)),C=O.b.div(r||(r=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n\n  img {\n    width: 70px;\n    margin-bottom: 16px;\n  }\n"]))),D=O.b.span(i||(i=Object(d.a)(["\n  font-family: var(--roboto-500);\n  font-size: 18px;\n  line-height: 26px;\n  color: #2c2c2c;\n  text-align: center;\n"]))),S=O.b.span(l||(l=Object(d.a)(["\n  font-size: 14px;\n  line-height: 22px;\n  text-align: center;\n  color: #595959;\n"]))),I=Object(O.b)(m.a)(s||(s=Object(d.a)(["\n  .ant-modal-header {\n    border-radius: 10px 10px 0 0;\n    background: #f2f4f5;\n    padding: 7px 24px;\n  }\n\n  .ant-modal-title {\n    font-family: var(--roboto-700);\n  }\n\n  .ant-modal-close-x {\n    height: 36.6px;\n    line-height: 36.6px;\n\n    .anticon {\n      color: #141414;\n    }\n  }\n\n  .ant-modal-content {\n    border-radius: 10px;\n  }\n"])))},1264:function(e,n,t){"use strict";n.a=t.p+"static/media/delete.9999fdd9.svg"},1283:function(e,n,t){"use strict";n.a=t.p+"static/media/edit.688907bc.svg"},1292:function(e,n,t){"use strict";n.a=t.p+"static/media/EmptyObject.65d3750d.webp"},2120:function(e,n,t){"use strict";t.r(n);var c,a,o=t(21),r=t(16),i=t(0),l=t(26),s=t(39),d=t(480),b=t(1229),j=t(13),p=t.n(j),m=t(1267),u=t.n(m),f=t(1379),h=t.n(f),x=t(102),O=t.n(x),g=t(123),v=t.n(g),k=t(399),y=t.n(k),_=t(2134),R=t(1292),w=t(1283),C=t(1264),D=t(3),S=t(144),I=t(1263),$=t(320),z=t.n($),E=t(250),M=t.n(E),A=t(719),F=t.n(A),P=t(488),G=t.n(P),T=t(4),q=t(2);var K=Object(b.a)()((function(e){let{showModalRule:n,onHideModalRule:t,listAllGroups:c,objectID:a,isEdit:o,setIsEdit:r,IDRule:l,setActiveKey:b}=e;const[j]=M.a.useForm(),{t:p}=Object(d.a)(),m=Object(s.c)(),{loading:u,status:f,allRules:h}=Object(s.d)((e=>e.sharingReducer)),[x,g]=Object(i.useState)([]),v=()=>{t(),j.resetFields(),r(!1)};return Object(i.useEffect)((()=>{let e=[];c.length>0&&c.map((n=>e.push({label:n.name,value:n._id}))),g(e)}),[c]),Object(i.useEffect)((()=>{if(o){let e=h.filter((e=>e._id===l)),n=[];e[0].group_shared.map((e=>n.push(e._id))),j.setFieldsValue({object_of:e[0].group_detail._id,share_to:n,status:e[0].access_level})}}),[o,l,h,j]),Object(i.useEffect)((()=>{u.modalRule||("success"!==f.createRule&&"success"!==f.updateRule||(t(),j.resetFields(),r(!1),Object(T.a)("success",o?"Update successfully!":"Create successfully!"),m(Object(S.l)()),b(a),m(Object(S.i)({object_id:a}))),null!==f.createRule&&"success"!==f.createRule&&(Object(T.a)("error",f.createRule),m(Object(S.l)())),null!==f.updateRule&&"success"!==f.updateRule&&(Object(T.a)("error",f.updateRule),m(Object(S.l)())))}),[m,j,o,u,a,t,r,f,b]),Object(q.jsx)(L,{title:p(o?"sharing.editRule":"sharing.addRule"),visible:n,footer:null,width:600,onCancel:v,children:Object(q.jsxs)(M.a,{form:j,onFinish:e=>{let n={access_level:e.status,group_id:e.object_of,object_id:a,shared_to:e.share_to};m(o?Object(S.m)({...n,id:l}):Object(S.a)({...n}))},labelCol:{span:8},wrapperCol:{span:16},colon:!1,labelAlign:"left",children:[Object(q.jsx)(M.a.Item,{label:p("sharing.objectOf"),name:"object_of",rules:[{required:!0,message:p("common.placeholderSelect")}],children:Object(q.jsx)(F.a,{options:x,placeholder:p("common.placeholderSelect"),optionFilterProp:"label",showSearch:!0})}),Object(q.jsx)(M.a.Item,{label:p("sharing.shareTo"),name:"share_to",rules:[{required:!0,message:p("common.placeholderSelect")}],children:Object(q.jsx)(F.a,{options:x,placeholder:p("common.placeholderSelect"),mode:"multiple",optionFilterProp:"label"})}),Object(q.jsx)(M.a.Item,{label:p("common.status"),name:"status",rules:[{required:!0,message:p("common.placeholderSelect")}],children:Object(q.jsxs)(G.a.Group,{children:[Object(q.jsx)(G.a,{value:"read",children:p("common.read")}),Object(q.jsxs)(G.a,{value:"write",children:[p("common.read")," & ",p("common.write")]})]})}),Object(q.jsxs)(N,{label:" ",children:[Object(q.jsx)(O.a,{type:"primary",htmlType:"submit",loading:u.modalRule,children:p("common.save")}),Object(q.jsx)(O.a,{onClick:v,children:p("common.cancel")})]})]})})}));const L=Object(r.b)(z.a)(c||(c=Object(o.a)(["\n  .ant-modal-content {\n    border-radius: 10px;\n  }\n\n  .ant-modal-header {\n    border-radius: 10px 10px 0 0;\n    background: #f2f4f5;\n    padding: 7px 24px;\n  }\n\n  .ant-modal-title {\n    font-family: var(--roboto-700);\n  }\n\n  .ant-modal-close-x {\n    height: 36.6px;\n    line-height: 36.6px;\n\n    .anticon {\n      color: #141414;\n    }\n  }\n\n  .ant-form-item-label > label {\n    font-size: 16px;\n    color: #2c2c2c;\n  }\n\n  .ant-radio-checked .ant-radio-inner {\n    border-color: ",";\n  }\n\n  .ant-radio-inner::after {\n    background-color: ",";\n  }\n"])),(e=>e.theme.main),(e=>e.theme.main)),N=Object(r.b)(M.a.Item)(a||(a=Object(o.a)(["\n  margin-bottom: 0;\n\n  .ant-form-item-control-input-content {\n    display: flex;\n    justify-content: flex-end;\n  }\n\n  .ant-btn {\n    font-size: 16px;\n    height: unset;\n\n    :hover {\n      background: ",";\n      color: #fff;\n    }\n  }\n\n  .ant-btn-primary {\n    margin-right: 16px;\n    background: ",";\n    border: 1px solid ",";\n    color: #fff;\n  }\n"])),(e=>e.theme.darker),(e=>e.theme.main),(e=>e.theme.main));var H,J,U,V,W,B,Q,X,Y,Z,ee,ne=t(63);n.default=Object(b.a)()((function(e){const{t:n}=Object(d.a)(),t=Object(s.c)(),c=Object(l.o)(),{Column:a}=y.a;Object(i.useEffect)((()=>{t(Object(ne.b)(n("settings.sharing")))}),[n]);const{userRuleGlobal:o}=Object(s.d)((e=>e.userReducer)),{loading:r,status:b,allRules:j}=Object(s.d)((e=>e.sharingReducer)),{category:m}=Object(s.d)((e=>e.objectsManagementReducer)),{listAllGroups:f}=Object(s.d)((e=>e.groupReducer)),[x,O]=Object(i.useState)([]),[g,k]=Object(i.useState)(!1),[$,z]=Object(i.useState)(""),[E,M]=Object(i.useState)(!1),[A,F]=Object(i.useState)({}),[P,G]=Object(i.useState)([]),[L,N]=Object(i.useState)({}),H=e=>!!o.find((n=>"sharing"===p.a.get(n,"domain","")&&n.actions.includes(e)));return Object(i.useEffect)((()=>{t(Object(S.h)())}),[t]),Object(i.useEffect)((()=>{let e=[];j.map(((n,t)=>{let c=[];return n.group_shared.map((e=>c.push(e.name))),e.push({key:n._id,rule_number:t+1,owner:n.group_detail.name,share_to:c,privileges:"read"===n.access_level?"Read":"Read & Write"})})),G(e)}),[j]),Object(i.useEffect)((()=>{r.modalDelete||("success"===b.deleteRule&&(t(Object(D.setShowModalConfirmDelete)(!1)),Object(T.a)("success","Delete successfully!"),t(Object(S.l)()),t(Object(S.i)({object_id:$}))),null!==b.deleteRule&&"success"!==b.deleteRule&&(Object(T.a)("error",b.deleteRule),t(Object(S.l)())))}),[t,r.modalDelete,$,b.deleteRule]),Object(q.jsxs)(ce,{children:[Object(q.jsxs)(u.a,{children:[Object(q.jsx)(u.a.Item,{onClick:()=>c("/settings"),children:n("settings.settings")}),Object(q.jsx)(ae,{children:n("settings.sharing")})]}),Object(q.jsx)(oe,{children:Object.keys(m).length>0?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(re,{children:Object(q.jsx)("span",{children:n("object.objectName")})}),Object(q.jsx)(h.a,{accordion:!0,expandIcon:e=>{let{isActive:n}=e;return Object(q.jsx)(_.a,{rotate:n?-90:90})},activeKey:x,onChange:e=>{O(e),e&&t(Object(S.i)({object_id:e}))},children:Object.entries(m).map((e=>{let[c,o]=e;return o.map((e=>e.Status&&e.active&&Object(q.jsx)(ie,{header:e.Name,$active:x===e._id,extra:x===e._id&&H("create")&&Object(q.jsxs)(le,{$active:x===e._id,onClick:n=>((e,n)=>{e.stopPropagation(),k(!0),z(n)})(n,e._id),children:["+ ",n("sharing.addRule")]}),children:Object(q.jsxs)(y.a,{pagination:!1,dataSource:P,children:[Object(q.jsx)(a,{title:n("sharing.ruleNumber"),dataIndex:"rule_number"},"rule_number"),Object(q.jsx)(a,{title:n("sharing.owner"),dataIndex:"owner",render:e=>Object(q.jsx)(pe,{children:Object(q.jsx)("span",{children:e})})},"owner"),Object(q.jsx)(a,{title:n("sharing.shareTo"),dataIndex:"share_to",render:e=>Object(q.jsx)(je,{children:e.map(((e,n)=>Object(q.jsx)(pe,{children:Object(q.jsx)("span",{children:e})},n)))})},"share_to"),Object(q.jsx)(a,{title:n("role.privileges"),dataIndex:"privileges",render:(c,a)=>Object(q.jsxs)(de,{children:[Object(q.jsx)("span",{children:c}),(H("edit")||H("delete"))&&Object(q.jsxs)(be,{children:[H("edit")&&Object(q.jsx)(v.a,{title:n("common.edit"),children:Object(q.jsx)("img",{onClick:()=>{return n=a,t=e._id,F(n.key),z(t),M(!0),void k(!0);var n,t},src:w.a,alt:"edit"})}),H("delete")&&Object(q.jsx)(v.a,{title:n("common.delete"),children:Object(q.jsx)("img",{onClick:()=>{return n=a.key,c=e._id,t(Object(D.setShowModalConfirmDelete)(!0)),N({id:n}),void z(c);var n,c},src:C.a,alt:"delete"})})]})]})},"privileges")]})},e._id)))}))})]}):Object(q.jsxs)(se,{children:[Object(q.jsx)("img",{src:R.a,alt:"empty"}),Object(q.jsxs)("span",{children:[n("object.noObject")," ",n("object.object")]})]})}),Object(q.jsx)(K,{showModalRule:g,onHideModalRule:()=>k(!1),listAllGroups:f,objectID:$,isEdit:E,setIsEdit:M,IDRule:A,setActiveKey:O}),Object(q.jsx)(I.a,{title:n("sharing.rule"),decs:n("common.descriptionDelete"),methodDelete:S.e,dataDelete:L,isLoading:r.modalDelete})]})}));const{Panel:te}=h.a,ce=r.b.div(H||(H=Object(o.a)(["\n  padding: 16px 24px;\n\n  .ant-breadcrumb-link {\n    cursor: pointer;\n  }\n\n  .ant-space {\n    width: 100%;\n  }\n\n  .ant-collapse {\n    border: none;\n    background: #f2f8ff;\n  }\n\n  .ant-collapse-item {\n    border-bottom: none;\n    margin-bottom: 10px;\n  }\n\n  .ant-collapse-content {\n    border-top: none;\n  }\n\n  .ant-collapse-extra {\n    display: none;\n  }\n\n  .ant-spin {\n    display: flex;\n    justify-content: center;\n  }\n\n  .ant-collapse-content > .ant-collapse-content-box {\n    padding: 0;\n  }\n\n  .ant-table-thead > tr > th {\n    background: #f0f0f0;\n    border-bottom: 1px solid #d9d9d9;\n    border-right: 1px solid #d9d9d9;\n    padding: 8.5px 16px;\n    font-size: 16px;\n    color: #2c2c2c;\n\n    :before {\n      display: none;\n    }\n\n    :last-child {\n      border-right: none;\n    }\n  }\n\n  .ant-table-tbody > tr > td {\n    padding: 8.5px 16px;\n    border-bottom: 1px solid #ededed;\n    font-size: 16px;\n    color: #2c2c2c;\n  }\n\n  .ant-table-cell {\n    :first-child {\n      width: 10%;\n    }\n\n    :nth-child(2) {\n      width: 30%;\n    }\n\n    :nth-child(4) {\n      width: 20%;\n    }\n  }\n"]))),ae=Object(r.b)(u.a.Item)(J||(J=Object(o.a)(["\n  font-family: var(--roboto-500);\n  font-size: 18px !important;\n  color: #2c2c2c;\n  cursor: default;\n"]))),oe=r.b.div(U||(U=Object(o.a)(["\n  margin-top: 16px;\n"]))),re=r.b.div(V||(V=Object(o.a)(["\n  background: #fff;\n  border-radius: 10px 10px 0px 0px;\n  height: 46px;\n  padding: 10px 0 10px 43px;\n  margin-bottom: 10px;\n\n  span {\n    font-family: var(--roboto-500);\n    font-size: 18px;\n    color: #2c2c2c;\n  }\n"]))),ie=Object(r.b)(te)(W||(W=Object(o.a)(["\n  .ant-collapse-header {\n    background: ",";\n    font-size: 16px;\n    font-family: var(--roboto-500);\n    color: ","!important;\n    border: 1px solid #ececec;\n    padding: 9px 16px !important;\n\n    .ant-collapse-extra {\n      display: ",";\n    }\n\n    :hover {\n      .ant-collapse-extra {\n        display: block;\n      }\n      box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.16);\n    }\n  }\n"])),(e=>e.$active?e.theme.main:"#fff"),(e=>e.$active?"#fff":"#2c2c2c"),(e=>e.$active?"block":"none")),le=Object(r.b)(O.a)(B||(B=Object(o.a)(["\n  border: ",";\n  padding: 0 15px;\n  background: ",";\n\n  span {\n    color: ",";\n    font-size: 16px;\n  }\n\n  :hover {\n    background: ","!important;\n    border-color: "," !important;\n\n    span {\n      color: ","!important;\n    }\n  }\n\n  &.ant-btn:active {\n    background: ",";\n    border-color: "," span {\n      color: ",";\n    }\n  }\n\n  &.ant-btn:focus {\n    background: ",";\n    border-color: ",";\n\n    span {\n      color: ",";\n    }\n  }\n"])),(e=>e.$active?"1px solid #fff":"1px solid #20a2a2"),(e=>e.$active?e.theme.main:"#fff"),(e=>e.$active?"#fff":e.theme.main),(e=>e.$active?"#fff":e.theme.darker),(e=>e.theme.darker),(e=>e.$active?e.theme.darker:"#fff"),(e=>e.$active?e.theme.main:"#fff"),(e=>e.theme.main),(e=>e.$active?"#fff":e.theme.main),(e=>e.$active?e.theme.main:"#fff"),(e=>e.$active?"#fff":e.theme.main),(e=>e.$active?"#fff":e.theme.main)),se=r.b.div(Q||(Q=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 24px;\n\n  span {\n    font-size: 16px;\n    color: #2c2c2c;\n  }\n"]))),de=r.b.div(X||(X=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),be=r.b.div(Y||(Y=Object(o.a)(["\n  img {\n    cursor: pointer;\n    margin-left: 8px;\n\n    :hover {\n      background: #eeeeee;\n    }\n  }\n"]))),je=r.b.div(Z||(Z=Object(o.a)(["\n  display: flex;\n  align-items: center;\n"]))),pe=r.b.div(ee||(ee=Object(o.a)(["\n  background: #f2f4f5;\n  border-radius: 5px;\n  padding: 2px 8px;\n  width: fit-content;\n  margin-right: 8px;\n"])))}}]);
//# sourceMappingURL=118.6e9dbf9d.chunk.js.map