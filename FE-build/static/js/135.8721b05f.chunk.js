(this["webpackJsonpcrm-v3"]=this["webpackJsonpcrm-v3"]||[]).push([[135],{1602:function(e,n,t){"use strict";var a,i,o,l,r,s,c,d,b,m,p,h,f,j=t(21),x=t(0),g=t(16),u=t(409),O=t(164),y=t.n(O),v=t(250),k=t.n(v),w=t(719),_=t.n(w),Y=t(1312),S=t.n(Y),C=t(1424),D=t.n(C),I=t(102),z=t.n(I),F=t(123),H=t.n(F),M=t(486),T=t.n(M),N=t(320),P=t.n(N),E=t(1379),q=t.n(E),B=t(157),G=t.p+"static/media/delete.85cae55b.svg",R=t(136),W=t(2);const{Panel:A}=q.a,{Option:V}=_.a;n.a=function(e){var n;let{form:t,dataBusinessHours:a,$dataBusinessHours:i,required:o=!0}=e;const[l,r]=Object(x.useState)(!1),[s,c]=Object(x.useState)({}),d=(e,n,t)=>{let o=[...a.shifts];o[n]="time"===t?{...o[n],time:e}:{...o[n],day:e},i({...a,shifts:o})},b=()=>{r(!1)},m=()=>{i({...a,shifts:[...a.shifts,{day:[...a.workingDays],time:[]}]})};return Object(x.useEffect)((()=>{a.shifts.length>0&&a.shifts.forEach(((e,n)=>{e.time.length>0?t.setFieldsValue({["shift"+n]:[y()(e.time[0],"HH:mm"),y()(e.time[1],"HH:mm")]}):t.setFieldsValue({["shift"+n]:[void 0,void 0]})}))}),[a,t]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(K,{defaultActiveKey:"working_time",expandIconPosition:"end",size:"large",children:Object(W.jsxs)(A,{header:Object(W.jsxs)("div",{style:{display:"flex",columnGap:"8px"},children:[Object(W.jsx)(R.a,{icon:"work",size:24}),Object(W.jsx)("span",{style:{fontSize:"16px",fontFamily:"var(--roboto-700)"},children:"Working time"})]}),children:[Object(W.jsx)($,{required:o,children:Object(u.b)("slaSetting.workingDay")}),Object(W.jsx)(k.a.Item,{label:"",name:"working_day",rules:[{required:o,message:"Please select"}],wrapperCol:{span:24},children:Object(W.jsx)(_.a,{mode:"multiple",placeholder:Object(u.b)("slaSetting.selectDay"),onChange:e=>{i({...a,workingDays:e})},optionFilterProp:"label",showSearch:!0,children:B.I.map(((e,n)=>Object(W.jsx)(V,{value:e.value,children:Object(u.b)(e.label)},n)))})}),Object(W.jsx)($,{children:Object(u.b)("slaSetting.holidays")}),Object(W.jsxs)(L,{children:[Object(W.jsx)(Q,{children:Object(W.jsx)(k.a.Item,{label:"",name:"holidays",wrapperCol:{span:24},children:Object(W.jsx)(S.a,{placeholder:Object(u.b)("slaSetting.selectDay"),onChange:(e,n)=>{if(""!==n)if(8===a.shifts.length)Notification("warning","Max shifts, please delete one!");else{let e=[...a.holidays,n];t=e,new Set(t).size!==t.length?Notification("warning","Date exist!"):i({...a,holidays:[...a.holidays,n]})}var t}})})}),a.holidays.length>0&&Object(W.jsx)(U,{children:a.holidays.map(((e,n)=>Object(W.jsxs)(X,{children:[Object(W.jsx)("span",{children:e}),Object(W.jsx)(Z,{onClick:()=>(e=>{let n=[...a.holidays];n.splice(e,1),i({...a,holidays:n})})(n),children:"x"})]},n)))})]}),a.workingDays.length>0&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($,{required:o,children:Object(u.b)("slaSetting.shiftWork")}),a.shifts.length>0&&Object(W.jsx)(ne,{children:a.shifts.map(((e,n)=>Object(W.jsxs)(te,{children:[Object(W.jsx)(k.a.Item,{colon:!1,label:Object(W.jsx)(z.a,{onClick:()=>(c(n),void r(!0)),children:Object(W.jsxs)("span",{style:{fontSize:"16px",fontFamily:"var(--roboto-500)"},children:[Object(u.b)("slaSetting.shift")," ",n+1]})}),name:"shift"+n,labelCol:{span:4},wrapperCol:{span:20},children:Object(W.jsx)(D.a.RangePicker,{placeholder:[Object(u.b)("slaSetting.startTime"),Object(u.b)("slaSetting.endTime")],onChange:(e,t)=>d(t,n,"time"),allowClear:!1,suffixIcon:"",format:"HH:mm"})}),Object(W.jsx)("div",{className:"action",children:Object(W.jsx)(H.a,{title:"Delete",children:Object(W.jsx)("img",{onClick:()=>(e=>{let n=[...a.shifts];n.splice(e,1),i({...a,shifts:n})})(n),src:G,alt:"delete"})})})]},n)))}),a.holidays.length>0?Object(W.jsx)(W.Fragment,{children:a.shifts.length<7&&Object(W.jsx)(ee,{onClick:()=>m(),children:Object(W.jsxs)("span",{children:["+ ",Object(u.b)("slaSetting.addShift")]})})}):Object(W.jsx)(W.Fragment,{children:a.shifts.length<8&&Object(W.jsx)(ee,{onClick:()=>m(),children:Object(W.jsxs)("span",{children:["+ ",Object(u.b)("slaSetting.addShift")]})})})]})]},"working_time")}),Object(W.jsxs)(J,{title:"Shift work",visible:l,width:400,footer:null,onCancel:b,children:[Object(W.jsx)(k.a.Item,{label:"Gi\u1edd l\xe0m",name:"shift"+s,labelCol:{span:4},wrapperCol:{span:20},children:Object(W.jsx)(D.a.RangePicker,{onChange:(e,n)=>d(n,s,"time"),allowClear:!1,suffixIcon:"",format:"HH:mm"})}),Object(W.jsxs)(ie,{children:[Object(W.jsx)("legend",{children:"\xc1p d\u1ee5ng"}),Object(W.jsx)(T.a.Group,{value:a.shifts.length>0&&(null===(n=a.shifts[s])||void 0===n?void 0:n.day),onChange:e=>d(e,s,"day"),children:B.I.map(((e,n)=>Object(W.jsx)(T.a,{value:e.value,children:Object(u.b)(e.label)},n)))})]}),Object(W.jsx)(ae,{label:" ",colon:!1,children:Object(W.jsx)(z.a,{type:"primary",onClick:b,children:"Ok"})})]})]})};const J=Object(g.b)(P.a)(a||(a=Object(j.a)(["\n  .ant-modal-content {\n    border-radius: 10px;\n  }\n\n  .ant-modal-header {\n    border-radius: 10px 10px 0 0;\n    background: #f2f4f5;\n    padding: 7px 24px;\n  }\n\n  .ant-modal-title {\n    font-family: var(--roboto-700);\n  }\n\n  .ant-modal-close-x {\n    height: 36.6px;\n    line-height: 36.6px;\n\n    .anticon {\n      color: #141414;\n    }\n  }\n\n  .ant-picker {\n    width: 100%;\n  }\n\n  .ant-checkbox-wrapper + .ant-checkbox-wrapper {\n    margin-left: 0;\n  }\n"]))),K=Object(g.b)(q.a)(i||(i=Object(j.a)(["\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.05);\n  border: 1px solid #ececec !important;\n  border-bottom: 0 !important;\n  border-radius: 8px !important;\n  background-color: #fff !important;\n\n  .ant-collapse-item {\n    border-bottom: 1px solid #ececec !important;\n    border-radius: 0 0 8px 8px !important;\n  }\n\n  .ant-collapse-content {\n    border-top: 1px solid #ececec !important;\n    border-radius: 0 0 8px 8px !important;\n  }\n\n  .ant-form-item {\n    margin-bottom: 16px;\n  }\n"]))),$=g.b.p(o||(o=Object(j.a)(["\n  color: #2c2c2c;\n  font-family: var(--roboto-500);\n  font-size: 16px;\n  margin-bottom: 8px;\n\n  :after {\n    display: ",';\n    margin-left: 4px;\n    color: #ff4d4f;\n    font-size: 14px;\n    line-height: 1;\n    content: "*";\n  }\n'])),(e=>{let{required:n}=e;return n?"inline-block":"none"})),L=g.b.div(l||(l=Object(j.a)(["\n  display: flex;\n  margin-bottom: 16px;\n\n  .ant-picker-now-btn {\n    color: ",";\n  }\n\n  .ant-picker-today-btn {\n    color: ",";\n  }\n"])),(e=>e.theme.main),(e=>e.theme.main)),Q=g.b.div(r||(r=Object(j.a)(["\n  padding: 16px 8px;\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  background: #fff;\n  width: 35%;\n\n  .ant-picker {\n    width: 100%;\n  }\n\n  .ant-form-item {\n    margin-bottom: 0;\n  }\n"]))),U=g.b.div(s||(s=Object(j.a)(["\n  padding: 12px 4px;\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n  background: #fff;\n  width: 65%;\n  margin-left: 4px;\n  display: flex;\n  flex-wrap: wrap;\n"]))),X=g.b.div(c||(c=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  padding: 2px 4px 2px 2px;\n  background: #f5f5f5;\n  border: 1px solid #f0f0f0;\n  border-radius: 2px;\n  width: fit-content;\n  margin: 2px 2px;\n  height: 24px;\n"]))),Z=g.b.div(d||(d=Object(j.a)(["\n  cursor: pointer;\n  margin-left: 4px;\n  color: rgba(0, 0, 0, 0.45);\n"]))),ee=g.b.div(b||(b=Object(j.a)(["\n  width: fit-content;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n\n  span {\n    color: ",";\n    font-size: 16px;\n  }\n"])),(e=>e.theme.main)),ne=g.b.div(m||(m=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n"]))),te=g.b.div(p||(p=Object(j.a)(["\n  display: flex;\n  position: relative;\n  width: 48%;\n  min-width: 400px;\n\n  :nth-child(odd) {\n    margin-right: 16px;\n  }\n\n  .action {\n    position: absolute;\n    top: 4px;\n    right: 15px;\n    visibility: hidden;\n    opacity: 0;\n    transition: visibility 0s, opacity 0.5s linear;\n\n    img {\n      cursor: pointer;\n    }\n  }\n\n  :hover .action {\n    visibility: visible;\n    opacity: 1;\n\n    img {\n      :hover {\n        background: #eeeeee;\n      }\n    }\n  }\n\n  .ant-picker {\n    width: 100%;\n  }\n\n  .ant-form-item {\n    width: 100%;\n  }\n\n  .ant-btn {\n    border: 1px solid #e2eefe;\n    background: #e2eefe;\n    width: 100%;\n    padding: 0 8px;\n  }\n\n  .ant-form-item-label > label.ant-form-item-no-colon::after {\n    display: none;\n  }\n"]))),ae=Object(g.b)(k.a.Item)(h||(h=Object(j.a)(["\n  margin-bottom: 0;\n  margin-top: 16px;\n\n  .ant-btn {\n    font-size: 16px;\n    height: unset;\n\n    :hover {\n      background: ","!important;\n      color: #fff !important;\n    }\n  }\n\n  .ant-btn-primary {\n    margin-right: 16px;\n    background: ",";\n    border: 1px solid ",";\n    color: #fff;\n  }\n\n  .ant-form-item-control-input-content {\n    display: flex;\n    justify-content: flex-end;\n  }\n"])),(e=>e.theme.darker),(e=>e.theme.main),(e=>e.theme.main)),ie=g.b.fieldset(f||(f=Object(j.a)(["\n  background: #fff;\n  border-radius: 10px;\n  height: fit-content;\n  border: 1px solid #ececec;\n  padding: 0 16px 16px 16px;\n\n  .ant-checkbox-group {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ",";\n    border-color: ",";\n  }\n\n  .ant-checkbox {\n    :hover {\n      .ant-checkbox-inner {\n        border-color: ","!important;\n      }\n    }\n  }\n\n  legend {\n    width: fit-content;\n    color: ",";\n    font-size: 16px;\n    font-family: var(--roboto-500);\n    padding: 0 8px;\n    margin-bottom: 0;\n    border-bottom: none;\n  }\n"])),(e=>e.theme.main),(e=>e.theme.main),(e=>e.theme.main),(e=>e.theme.main))},2034:function(e,n,t){"use strict";t.r(n);var a=t(16),i=t(0),o=t(39),l=t(26),r=t(480),s=t(1229),c=t(13),d=t.n(c),b=t(1267),m=t.n(b),p=t(250),h=t.n(p),f=t(719),j=t.n(f),x=t(1379),g=t.n(x),u=t(102),O=t.n(u),y=t(136),v=t(1602),k=t(4),w=t(217),_=t(63),Y=t(2);const{Panel:S}=g.a;n.default=Object(s.a)()((function(e){const{t:n}=Object(r.a)(),t=Object(o.c)(),a=Object(l.o)(),[s]=h.a.useForm();Object(i.useEffect)((()=>{t(Object(_.b)(n("settings.dateTimeSetting")))}),[n]);const{userRuleGlobal:c}=Object(o.d)((e=>e.userReducer)),{allConfig:b}=Object(o.d)((e=>e.datetimeSettingReducer)),[p,f]=Object(i.useState)({holidays:[],shifts:[],workingDays:[]}),[x,g]=Object(i.useState)({label:"",value:""}),[u,T]=Object(i.useState)({label:"",value:""}),N=e=>!!c.find((n=>"date_time_setting"===d.a.get(n,"domain","")&&n.actions.includes(e))),P=e=>{switch(e){case"%Y-%m-%d":g({label:"2022-12-30",value:"%Y-%m-%d"});break;case"%Y/%m/%d":g({label:"2022/12/30",value:"%Y/%m/%d"});break;case"%Y %m %d":g({label:"2022 12 30",value:"%Y %m %d"});break;case"%m-%d-%Y":g({label:"12-30-2022",value:"%m-%d-%Y"});break;case"%m/%d/%Y":g({label:"12/30/2022",value:"%m/%d/%Y"});break;case"%m %d %Y":g({label:"12 30 2022",value:"%m %d %Y"});break;case"%d-%m-%Y":g({label:"30-12-2022",value:"%d-%m-%Y"});break;case"%d/%m/%Y":g({label:"30/12/2022",value:"%d/%m/%Y"});break;case"%d %m %Y":g("30 12 2022"),g({label:"30 12 2022",value:"%d %m %Y"})}},E=e=>{switch(e){case"%H:%M:%S":T({label:"12:60:60",value:"%H:%M:%S"});break;case"%H:%M":T({label:"12:60",value:"%H:%M"})}},q=(e,n)=>{"date"===n?P(e):E(e)};return Object(i.useEffect)((()=>{t(Object(w.c)())}),[t]),Object(i.useEffect)((()=>{Object.keys(b).length>0&&(s.setFieldsValue({date_format:b.tenant_date_format,time_format:b.tenant_datetime_format.slice(9),working_day:d.a.get(b,"working_days",[])||[]}),P(b.tenant_date_format),E(b.tenant_datetime_format.slice(9)),f({holidays:d.a.get(b,"holidays",[])||[],shifts:d.a.get(b,"shift_work",[])||[],workingDays:d.a.get(b,"working_days",[])||[]}))}),[b,s]),Object(i.useEffect)((()=>()=>{t(Object(w.d)())}),[t]),Object(Y.jsxs)(C,{children:[Object(Y.jsxs)(m.a,{children:[Object(Y.jsx)(m.a.Item,{onClick:()=>a("/settings"),children:n("settings.settings")}),Object(Y.jsx)(D,{children:n("settings.dateTimeSetting")})]}),Object(Y.jsxs)(z,{children:[Object(Y.jsx)("div",{style:{fontSize:"18px",fontFamily:"var(--roboto-500)"},children:n("settings.dateTimeSetting")}),Object(Y.jsx)(F,{children:n("dateTimeSetting.description2")}),Object(Y.jsxs)(h.a,{form:s,wrapperCol:{span:14},colon:!1,labelAlign:"left",onFinish:e=>{if(0===p.workingDays.length||p.workingDays.length>0&&p.shifts.length>0&&p.shifts.every((e=>0!==e.time.length))){let n=[];p.shifts.forEach((e=>{let t=["False","False","False","False","False","False","False"];e.day.forEach((e=>{t[e]="True"})),n.push({from_time:{hour:parseInt(e.time[0].slice(0,2)),minute:parseInt(e.time[0].slice(3,5))},to_time:{hour:parseInt(e.time[1].slice(0,2)),minute:parseInt(e.time[1].slice(3,5))},applicable_weekdays:[...t]})})),t(Object(w.b)({tenant_date_format:x.value,tenant_datetime_format:x.value+" "+u.value,working_days:d.a.get(e,"working_day",[]),holidays:d.a.get(p,"holidays",[]),shift_work:n||[]}))}else Object(k.a)("warning","Please full fields shift work!")},children:[Object(Y.jsx)(I,{defaultActiveKey:"date_time_format",expandIconPosition:"end",size:"large",children:Object(Y.jsxs)(S,{header:Object(Y.jsxs)("div",{style:{display:"flex",columnGap:"8px"},children:[Object(Y.jsx)(y.a,{icon:"time",size:24}),Object(Y.jsx)("span",{style:{fontSize:"16px",fontFamily:"var(--roboto-700)"},children:"Date time format"})]}),children:[Object(Y.jsx)(h.a.Item,{label:n("dateTimeSetting.dateFormat"),name:"date_format",children:Object(Y.jsx)(j.a,{disabled:!N("edit"),options:[{label:"YYYY-MM-DD",value:"%Y-%m-%d"},{label:"YYYY/MM/DD",value:"%Y/%m/%d"},{label:"MM-DD-YYYY",value:"%m-%d-%Y"},{label:"MM/DD/YYYY",value:"%m/%d/%Y"},{label:"DD-MM-YYYY",value:"%d-%m-%Y"},{label:"DD/MM/YYYY",value:"%d/%m/%Y"}],onSelect:e=>q(e,"date")})}),Object(Y.jsx)(h.a.Item,{label:n("dateTimeSetting.timeFormat"),name:"time_format",children:Object(Y.jsx)(j.a,{disabled:!N("edit"),options:[{label:"HH:mm:ss",value:"%H:%M:%S"},{label:"HH:mm",value:"%H:%M"}],onSelect:e=>q(e,"time")})}),Object(Y.jsxs)(H,{children:[Object(Y.jsxs)("p",{children:[n("dateTimeSetting.preview"),": \xa0"]}),Object(Y.jsxs)("span",{children:[x.label," ",u.label]})]})]},"date_time_format")}),Object(Y.jsx)(v.a,{form:s,dataBusinessHours:p,$dataBusinessHours:f,required:!1}),Object(Y.jsx)(M,{children:Object(Y.jsx)(O.a,{type:"primary",htmlType:"submit",children:n("common.save")})})]})]})]})}));const C=a.b.div.withConfig({displayName:"settingDateTime__Wrapper",componentId:"sc-jzdklw-0"})(["padding:16px 24px;background:#f9fafc;height:100%;overflow:auto;.ant-breadcrumb-link{cursor:pointer;}.ant-form{width:100%;}.ant-form-item-label > label{font-size:16px;color:#2c2c2c;font-family:var(--roboto-500);}"]),D=Object(a.b)(m.a.Item).withConfig({displayName:"settingDateTime__BreadcrumbItem",componentId:"sc-jzdklw-1"})(["font-family:var(--roboto-500);font-size:18px !important;color:#2c2c2c;cursor:default;"]),I=Object(a.b)(g.a).withConfig({displayName:"settingDateTime__CollapseCustom",componentId:"sc-jzdklw-2"})(["box-shadow:0px 8px 16px 0px rgba(0,0,0,0.05);border:1px solid #ececec !important;border-bottom:0 !important;border-radius:8px !important;background-color:#fff !important;margin-bottom:16px;.ant-collapse-item{border-bottom:1px solid #ececec !important;border-radius:0 0 8px 8px !important;}.ant-collapse-content{border-top:1px solid #ececec !important;border-radius:0 0 8px 8px !important;}.ant-form-item{margin-bottom:16px;}"]),z=a.b.div.withConfig({displayName:"settingDateTime__Config",componentId:"sc-jzdklw-3"})(["width:638px;margin:0 auto;display:flex;flex-direction:column;"]),F=a.b.span.withConfig({displayName:"settingDateTime__Note",componentId:"sc-jzdklw-4"})(["font-size:16px;font-family:var(--roboto-400-i);color:#8c8c8c;margin-bottom:24px;"]),H=a.b.div.withConfig({displayName:"settingDateTime__Preview",componentId:"sc-jzdklw-5"})(["font-size:16px;color:#2c2c2c;display:flex;p{margin-bottom:0;color:#919eab;}span{font-family:var(--roboto-500);}"]),M=a.b.div.withConfig({displayName:"settingDateTime__WrapButton",componentId:"sc-jzdklw-6"})(["display:flex;justify-content:flex-end;margin-top:16px;.ant-btn{font-size:16px;height:unset;width:121px;:hover{background:",";color:#fff;}}.ant-btn-primary{background:",";border:1px solid ",";color:#fff;}"],(e=>e.theme.darker),(e=>e.theme.main),(e=>e.theme.main))}}]);
//# sourceMappingURL=135.8721b05f.chunk.js.map