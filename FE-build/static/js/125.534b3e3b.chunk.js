(this["webpackJsonpcrm-v3"]=this["webpackJsonpcrm-v3"]||[]).push([[125],{1267:function(e,t,n){"use strict";var o=n(17).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(1269));t.default=i.default},1269:function(e,t,n){"use strict";var o=n(24).default,i=n(17).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(44)),a=i(n(34)),l=i(n(108)),c=i(n(11)),d=i(n(236)),s=o(n(0)),f=n(61),u=i(n(251)),p=n(158),m=(i(n(93)),i(n(1270))),b=i(n(1271)),h=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};function g(e,t,n,o){var i=n.indexOf(e)===n.length-1,r=function(e,t){if(!e.breadcrumbName)return null;var n=Object.keys(t).join("|");return e.breadcrumbName.replace(new RegExp(":(".concat(n,")"),"g"),(function(e,n){return t[n]||e}))}(e,t);return i?s.createElement("span",null,r):s.createElement("a",{href:"#/".concat(o.join("/"))},r)}var v=function(e,t){return e=(e||"").replace(/^\//,""),Object.keys(t).forEach((function(n){e=e.replace(":".concat(n),t[n])})),e},j=function(e,t,n){var o=(0,l.default)(e),i=v(t||"",n);return i&&o.push(i),o},x=function(e){var t,n=e.prefixCls,o=e.separator,i=void 0===o?"/":o,l=e.style,b=e.className,x=e.routes,_=e.children,y=e.itemRender,O=void 0===y?g:y,w=e.params,N=void 0===w?{}:w,C=h(e,["prefixCls","separator","style","className","routes","children","itemRender","params"]),E=s.useContext(f.ConfigContext),k=E.getPrefixCls,I=E.direction,S=k("breadcrumb",n);if(x&&x.length>0){var P=[];t=x.map((function(e){var t,n=v(e.path,N);n&&P.push(n),e.children&&e.children.length&&(t=s.createElement(u.default,{items:e.children.map((function(e){return{key:e.path||e.breadcrumbName,label:O(e,N,x,j(P,e.path,N))}}))}));var o={separator:i};return t&&(o.overlay=t),s.createElement(m.default,(0,a.default)({},o,{key:n||e.breadcrumbName}),O(e,N,x,P))}))}else _&&(t=(0,d.default)(_).map((function(e,t){return e?(0,p.cloneElement)(e,{separator:i,key:t}):e})));var M=(0,c.default)(S,(0,r.default)({},"".concat(S,"-rtl"),"rtl"===I),b);return s.createElement("nav",(0,a.default)({className:M,style:l},C),s.createElement("ol",null,t))};x.Item=m.default,x.Separator=b.default;t.default=x},1270:function(e,t,n){"use strict";var o=n(24).default,i=n(17).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(34)),a=i(n(483)),l=o(n(0)),c=(i(n(93)),n(61)),d=i(n(485)),s=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n},f=function(e){var t=e.prefixCls,n=e.separator,o=void 0===n?"/":n,i=e.children,f=e.menu,u=e.overlay,p=e.dropdownProps,m=s(e,["prefixCls","separator","children","menu","overlay","dropdownProps"]),b=(0,l.useContext(c.ConfigContext).getPrefixCls)("breadcrumb",t);var h;return h=function(t){if(f||u){var n=(0,r.default)({},p);return"overlay"in e&&(n.overlay=u),l.createElement(d.default,(0,r.default)({menu:f,placement:"bottom"},n),l.createElement("span",{className:"".concat(b,"-overlay-link")},t,l.createElement(a.default,null)))}return t}(h="href"in m?l.createElement("a",(0,r.default)({className:"".concat(b,"-link")},m),i):l.createElement("span",(0,r.default)({className:"".concat(b,"-link")},m),i)),void 0!==i&&null!==i?l.createElement("li",null,h,o&&l.createElement("span",{className:"".concat(b,"-separator")},o)):null};f.__ANT_BREADCRUMB_ITEM=!0;t.default=f},1271:function(e,t,n){"use strict";var o=n(24).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(0)),r=n(61),a=function(e){var t=e.children,n=(0,i.useContext(r.ConfigContext).getPrefixCls)("breadcrumb");return i.createElement("span",{className:"".concat(n,"-separator")},t||"/")};a.__ANT_BREADCRUMB_SEPARATOR=!0;t.default=a},2033:function(e,t,n){"use strict";n.r(t);var o=n(16),i=n(0),r=n(323),a=n(164),l=n.n(a),c=n(26),d=n(39),s=n(237),f=n(157),u=n(165),p=n.n(u),m=n(1267),b=n.n(m),h=n(102),g=n.n(h),v=n(680),j=n(247),x=n(2);t.default=function(){let e=Object(c.o)();const t=Object(d.c)(),{dataNoti:n}=Object(d.d)((e=>e.notificationReducer)),[o,a]=Object(i.useState)([]),[u,m]=Object(i.useState)(0),[h,g]=Object(i.useState)(!0),[P,M]=Object(i.useState)({}),A=Object(i.useCallback)((()=>{t(Object(j.b)({record_per_page:20,page:u}))}),[t,u]),R=(n,o,i,r,a)=>{var l;if(l=r,t(Object(j.e)({_id:l})),n.includes("The import process of file"))e("/view-logs");else if(n.includes("exported successfully")||n.includes("is exporting. We will notify you when it is finished."))e("/export-history");else if(n.includes("Error occurs when exporting report, Please contact the Admin."));else if("User"===o)e("/logs-user");else if("CalendarEvent"===o)null!==a&&void 0!==a&&a.record_id?(localStorage.setItem("id_event",a.record_id),e("/calendar-detail")):e("/404");else if("email"!==(null===a||void 0===a?void 0:a.category)&&"send_email"!==(null===a||void 0===a?void 0:a.category)||null===a||void 0===a||!a.notification_type||"error"!==(null===a||void 0===a?void 0:a.notification_type))o&&i&&e("/consolidated-view/".concat(o,"/").concat(i));else{let t=new RegExp(/style="(.*?)"/),n=a.additional_info.match(t),r={};if(n){let e=n[0].replaceAll('"',"'");r=JSON.parse(a.additional_info.replaceAll("'",'"').replace(n[0],e))}else r=JSON.parse(a.additional_info.replaceAll("'",'"'));let l=r.action_email?r.action_email:"send_email";delete r.action_email,localStorage.setItem("emailError",JSON.stringify(r)),localStorage.setItem("typeEmailError",l),e("send_email"!==l?"/consolidated-view/".concat(o,"/").concat(r.record_id_main):"/consolidated-view/".concat(o,"/").concat(i))}},T=()=>{a([]),t(Object(j.d)()),A(),m(0)},z=Object(i.useCallback)((()=>{let e=[...o];e.forEach(((t,n)=>{let o=l()(t.created_date).fromNow();e[n].time=o})),a(e)}),[o]);return Object(i.useEffect)((()=>{let e;return o.length>0&&(e=setInterval(z,6e4)),()=>clearInterval(e)}),[o,z]),Object(i.useEffect)((()=>{A()}),[A]),Object(i.useEffect)((()=>{if(null!==n&&void 0!==n&&n.list_notification){let e=[];n.list_notification.map((t=>{let n={...t,time:""};return e.push(n)})),e.forEach(((t,n)=>{e[n].time=l()(t.created_date).fromNow()})),a((t=>{const o=t.concat(e).filter(((e,t,n)=>n.findIndex((t=>t._id===e._id))===t));return(n.list_notification.length<20||1e3===o.length)&&g(!1),o}))}}),[n]),Object(x.jsxs)(_,{id:"scrollableDiv",children:[Object(x.jsxs)(b.a,{children:[Object(x.jsx)(b.a.Item,{onClick:()=>e("/dashboard"),children:"Dasboard"}),Object(x.jsx)(O,{children:"Notifications"})]}),Object(x.jsx)(y,{children:0===o.length?Object(x.jsx)(w,{children:"No notification"}):Object(x.jsxs)(C,{children:[Object(x.jsx)(N,{children:Object(x.jsxs)(S,{onClick:()=>T(),children:[Object(x.jsx)("img",{src:v.a,alt:""}),Object(x.jsx)("span",{children:"Mark all as read"})]})}),Object(x.jsx)(r.a,{dataLength:o.length,loader:Object(x.jsx)(p.a,{}),hasMore:h,next:()=>{let e=u+1;setTimeout((()=>{m(e)}),1e3)},scrollableTarget:"scrollableDiv",children:o.map(((e,t)=>Object(x.jsxs)(E,{isSeen:e.is_seen,children:[Object(x.jsx)(k,{showMore:P[e._id],overflow:e.content.length>500,onClick:()=>R(e.content,e.object_id,e.record_id,e._id,e),children:Object(s.a)(e.content,f.C)}),e.content.length>500&&Object(x.jsx)("p",{onClick:t=>((e,t)=>{e.preventDefault();let n={...P};n[t]=!n[t],M(n)})(t,e._id),children:P[e._id]?"Show less":"Show More"}),Object(x.jsx)(I,{children:e.time})]},t)))})]})})]})};const _=o.b.div.withConfig({displayName:"notification__Wrapper",componentId:"sc-j1gg80-0"})(["padding:24px;overflow-y:auto;height:calc(100vh - 130px);.ant-breadcrumb-link{cursor:pointer;}"]),y=o.b.div.withConfig({displayName:"notification__Wrap",componentId:"sc-j1gg80-1"})(["width:67rem;padding-top:24px;margin:16px auto 0 auto;background:#fff;"]),O=Object(o.b)(b.a.Item).withConfig({displayName:"notification__BreadcrumbItem",componentId:"sc-j1gg80-2"})(["font-family:var(--roboto-500);font-size:18px !important;color:#2c2c2c;cursor:default;"]),w=o.b.div.withConfig({displayName:"notification__EmptyNoti",componentId:"sc-j1gg80-3"})(["display:flex;justify-content:center;align-items:center;height:100%;font-size:20px;font-family:var(--roboto-700);"]),N=o.b.div.withConfig({displayName:"notification__WrapTitle",componentId:"sc-j1gg80-4"})(["display:flex;justify-content:flex-end;padding-right:24px;"]),C=o.b.div.withConfig({displayName:"notification__EarlierNoti",componentId:"sc-j1gg80-5"})([".infinite-scroll-component__outerdiv{padding-bottom:25px;}.infinite-scroll-component{display:flex;flex-direction:column;justify-content:center;}"]),E=o.b.div.withConfig({displayName:"notification__Noti",componentId:"sc-j1gg80-6"})(["padding:8px 24px;overflow:hidden;text-overflow:ellipsis;position:relative;p{font-size:16px;margin:8px 0;color:",";}:hover{background:#f2f4f5;cursor:pointer;}::after{display:",';position:absolute;content:"";width:12px;height:12px;border-radius:50%;background:#2ad181;top:40%;right:24px;}'],(e=>e.theme.main),(e=>e.isSeen?"none":"unset")),k=o.b.div.withConfig({displayName:"notification__TextNoti",componentId:"sc-j1gg80-7"})(["display:",";-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;font-size:16px;width:90%;color:#252424;"],(e=>{let{overflow:t,showMore:n}=e;return t&&!n?"-webkit-box":"inline-block"})),I=o.b.div.withConfig({displayName:"notification__TimeNoti",componentId:"sc-j1gg80-8"})(["color:",";font-size:14px;"],(e=>e.theme.main)),S=Object(o.b)(g.a).withConfig({displayName:"notification__MarkAll",componentId:"sc-j1gg80-9"})(["margin-bottom:16px;&.ant-btn{font-size:16px;color:#2c2c2c;:hover{background:"," !important;color:#fff !important;img{filter:brightness(200);}}}&.ant-btn:active{background:#fff;border:1px solid #d9d9d9;color:#2c2c2c;}&.ant-btn:focus{background:#fff;border:1px solid #d9d9d9;color:#2c2c2c;}img{margin-right:10px;}"],(e=>e.theme.darker))}}]);
//# sourceMappingURL=125.534b3e3b.chunk.js.map